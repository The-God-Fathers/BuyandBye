{% extends "homepage/base.html" %}
{% load hitcount_tags %}
<!-- Home content block -->
{% block content %}

{% block featured %}
{% endblock featured%}


<!-- popular items  -->
{% block popular %}
<div class="container bg-light mt-5" id="Popular_Items">
    <div class="row justify-content-center">
        <legend>
            Popular Items
        </legend>
    </div>
</div>

{% for pop_item in popular_items %}
<div class="d-inline-flex p-2 bd-highlight align">
    <div class="card card-item-grid text-center">
        <img src="{{pop_item.image.url}}" alt="default.img" class="card-img-top img-item-grid-cover">
        <span class="badge badge-danger badge-header-category">{{pop_item.category}}</span>
        <div class="card-body">
            <a href="{% url 'item-detail' pop_item.slug %}" title="{{ pop_item.title }}" class="span">
                <p class="card-title text-primary">
                    {{ pop_item.title }}
                </p>
            </a>
            <p class="card-subtitle-price" title="{{ pop_item.price }}">
                <b>{{pop_item.price}}</b>
            </p>
            <p class="card-subtitle-condition" title="{{ pop_item.condition }}">
                {{pop_item.condition}}
            </p>
            <p class="card-subtitle-condition" title="Ad views: {% get_hit_count for pop_item %}">
                Ad views: {% get_hit_count for pop_item %}
            </p>
        </div>
    </div>
</div>
{% endfor %}

<div class="row justify-content-center">
    <button class="btn btn-primary">View More</button>
</div>

<!-- / popular item -->
{% endblock popular %}
<!-- / popular items  -->

<!-- Recent Items -->
{% block recent %}
<div class="container bg-light" id="Recent_Item">
    <div class="row justify-content-center">
        <legend>
            Recent Items
        </legend>
    </div>
</div>

{% for items in item %}
<!-- bootstrap styling -->
<div class="d-inline-flex p-2 bd-highlight align-items-center bg-">
    <div class="card card-item-grid text-center">
        <img src="{{items.image.url}}" alt="" class="card-img-top img-item-grid-cover">
        <span class="badge badge-danger badge-header-category">{{items.category}}</span>
        <div class="card-body">
            <a href="{% url 'item-detail' items.slug %}" title="{{ items.title }}">
                <p class="card-title text-primary span">
                    {{ items.title }}
                </p>
            </a>
            <p class="card-subtitle card-subtitle-price" title="{{ items.price }}">
                <b>{{items.price}}</b>
            </p>
            <p class="card-subtitle card-subtitle-condition" title="{{ items.condition }}">
                {{items.condition}}
            </p>
        </div>
        <!-- <div class="text-muted">
                    <hr>
                    <img class="circle" style="width:16px; height:16px;" src="{{ items.author.profile.image.url }}">
                    <a href="{% url 'user-item' items.author.username %}" class="mr-2 text-muted" style="font-size: 10px">
                         {{ items.author }}
                    </a><br>
                    <small class="text-muted" style="font-size: 10px">{{items.date_posted|date:"F d, Y"}}</small>
               </div> -->
    </div>
</div>
<!-- / bootstrap styling -->
{% endfor %}
<!-- / Block for loop listing the items  -->

<!-- Bootstrsap Paginator -->
{% if is_paginated %}
<div class="my-3 mx-auto">

    <nav aria-label="Page navigation example">
        <ul class="pagination pg-blue justify-content-center ">

            <!-- Paginator check for previous pages availability, eg. if current page = 3, Previous = 2 and First is always = 1 -->
            {% if page_obj.has_previous %}
            <li class="page-item"><a class="page-link" href="?page=1">
                    First
                </a></li>
            <li class="page-item"><a class="page-link" href="?page={{ page_obj.previous_page_number }}"><i
                        class="material-icons md-18">
                        navigate_before</i>
                </a></li>

            {% else %}
            <li class="page-item disabled"><a class="page-link" href="#">
                    First
                </a></li>
            <li class="page-item disabled">
                <a class="page-link" href="#">
                    <i class="material-icons md-18">navigate_before</i>
                </a>
            </li>
            {% endif %}


            <!-- Paginator check for neighbouring pages availability, eg. if current page = 3, neighbour (-, prev)= 1,2 and (+, next) = 4,5 -->
            {% for num in page_obj.paginator.page_range %}
            {% if page_obj.number == num %}
            <li class="page-item active"><a class="page-link" href="?page={{num}}">
                    {{num}}<span class="sr-only">(current)</span>
                </a></li>
            {% elif num > page_obj.number|add:'-3' and num
            < page_obj.number|add: '3' %} <li class="page-item"><a class="page-link" href="?page={{num}}">
                    {{num}}
                </a></li>
            {% endif %}
            {% endfor %}

            <!-- Paginator check for previous pages availability, eg. if current page = 3, Next = 4 and Last is always = Total pages -->
            {% if page_obj.has_next %}
            <li class="page-item ">
                <a class="page-link" href="?page={{ page_obj.next_page_number }}">
                    <i class="material-icons md-18">navigate_next</i>
                </a>
            </li>
            <li class="page-item "><a class="page-link" href="?page={{ page_obj.paginator.num_pages }}">
                    Last
                </a></li>

            {% else %}
            <li class="page-item disabled">
                <a class="page-link" href="#">
                    <i class="material-icons md-18">navigate_next</i>
                </a>
            </li>
            <li class="page-item disabled"><a class="page-link" href="#">
                    Last
                </a></li>
            {% endif %}

        </ul>
    </nav>
</div>
{% endif %}
<!-- / Bootstrap Paginator -->
<div class="row justify-content-center">
    <button class="btn btn-primary">View More</button>
</div>
{% endblock recent %}
<!--/ Recent Items -->

{% endblock content %}
<!-- / Home content block -->